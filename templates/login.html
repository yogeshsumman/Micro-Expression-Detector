<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script> -->
    <script src="https://kit.fontawesome.com/de78888db2.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="../static/Css/login.css">
</head>

<body>

    {% block content %}

    {% with messages = get_flashed_messages() %}

    {% if messages %}

    {% for msg in messages %}
    <p>{{ msg }}</p>
    {% endfor %}

    {% endif %}

    {% endwith %}

    {% endblock %}

    <!-- <form action="#" method="POST" id="loginForm">
        <p>Name:</p>
        <p><input type="text" name="nm"></p>
        <p>Password:</p>
        <p><input type="password" name="pw"></p>

        <p><input type="submit" value="submit"></p>
        <a href="/register">Register</a>
    </form> -->
    <div class="hero">
        <div class="heading">
            <h1 class="welcome">Welcome to <strong>MicroSense.</strong> </h1>
            <p class="welcome-para">Unveil the Unspoken: Your Portal to <strong>Micro Expression Detection</strong></p>
        </div>
        <div class="login-container">
            <div>
                <h2>Login</h2>

                <form action="/" method="POST" id="loginForm">
                    <div class="input-group">
                        <!-- <label for="email">Email:</label> -->
                        <i class="fa-solid fa-envelope" style="display: flex;"><input type="email" class="form-control"
                                id="email" placeholder="Your username" name="email"></i>
                    </div>

                    <div class="form-group">
                        <!-- <label for="pwd">Password:</label> -->
                        <i class="fa-solid fa-lock" style="display: flex;"><input type="password" class="form-control" id="password" placeholder="Your password"
                            name="password"></i>
                    </div>

                    <button type="submit" class="btn submit">Submit</button>
                    <p class="register-para">Don't already have an account?<a href="/register" class="register">Register</a></p>
                    {% if session_expired %}
                        <div style="color:red;">
                            Your session has expired. Please log in again.
                        </div>
                    {% endif %}
                    {% if invalid_info %}
                        <div style="color:red;">
                            Invalid email or password. Please try again.
                        </div>
                     {% endif %}
                     {% if invalid_required_field %}
                        <div style="color:red;">
                            Please enter both email and password.
                        </div>
                     {% endif %}
                </form>
            </div>
        </div>
    </div>
    <script>
        // Track user activity
        var timeout;
        function resetTimer() {
            clearTimeout(timeout);
            timeout = setTimeout(logoutUser, 60000); // 1 minute (60000 milliseconds)
        }

        function logoutUser() {
            window.location.href = '/logout';
        }

        document.addEventListener('mousemove', resetTimer);
        document.addEventListener('keypress', resetTimer);

        // Start the timer initially
        resetTimer();
    </script>
</body>

</html>